# ============================================
# MULTIBOARD DATABASE SYNC SERVICE CONFIGURATION
# ============================================
# IMPORTANT: This file contains sensitive credentials
# 1. Copy this file to SYNC_SERVICE_CONFIG.env
# 2. Fill in all values with actual credentials
# 3. NEVER commit the actual .env file (it's in .gitignore)
# ============================================

# ============================================
# DATABASE CREDENTIALS
# ============================================

# Production Database (Supabase)
# Get from: https://app.supabase.com/project/[project-id]/settings/database
PRODUCTION_DATABASE_URL=postgresql://postgres.[project-ref]:[password]@aws-0-us-west-1.pooler.supabase.com:6543/postgres?pgbouncer=true&connection_limit=1
PRODUCTION_DATABASE_DIRECT_URL=postgresql://postgres.[project-ref]:[password]@aws-0-us-west-1.pooler.supabase.com:5432/postgres

# Staging Database (Supabase or other)
STAGING_DATABASE_URL=postgresql://postgres.[staging-ref]:[password]@db.staging.supabase.co:5432/postgres
STAGING_DATABASE_DIRECT_URL=postgresql://postgres.[staging-ref]:[password]@db.staging.supabase.co:5432/postgres

# Development Database (Local or Supabase)
DEV_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/multiboard_dev
DEV_DATABASE_DIRECT_URL=postgresql://postgres:postgres@localhost:5432/multiboard_dev

# Local Database (for testing)
LOCAL_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/multiboard_local

# ============================================
# SUPABASE CONFIGURATION
# ============================================
# Get from: https://app.supabase.com/project/[project-id]/settings/api

# Production Supabase
NEXT_PUBLIC_SUPABASE_URL=https://[project-ref].supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Staging Supabase (if different)
STAGING_SUPABASE_URL=https://[staging-ref].supabase.co
STAGING_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
STAGING_SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ============================================
# AWS / S3 CONFIGURATION (for dump storage)
# ============================================
# Option 1: AWS S3
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
S3_BUCKET=multiboard-sync-dumps
S3_ENDPOINT=https://s3.amazonaws.com

# Option 2: Cloudflare R2 (S3-compatible)
# R2_ACCOUNT_ID=...
# R2_ACCESS_KEY_ID=...
# R2_SECRET_ACCESS_KEY=...
# R2_BUCKET=multiboard-sync-dumps
# R2_ENDPOINT=https://[account-id].r2.cloudflarestorage.com

# ============================================
# REDIS CONFIGURATION (for job queue)
# ============================================
# Production Redis (AWS ElastiCache, Upstash, or Redis Cloud)
REDIS_URL=redis://default:[password]@[host]:6379/0

# Development Redis (local)
# REDIS_URL=redis://localhost:6379/0

# Upstash Redis (serverless option)
# UPSTASH_REDIS_REST_URL=https://[endpoint].upstash.io
# UPSTASH_REDIS_REST_TOKEN=...

# ============================================
# SERVICE CONFIGURATION
# ============================================
# Service URLs
SYNC_SERVICE_URL=https://sync.multiboard.com
SYNC_SERVICE_API_URL=https://api-sync.multiboard.com

# API Keys (generate strong random strings)
SYNC_SERVICE_API_KEY=sk_live_...
SYNC_SERVICE_WEBHOOK_SECRET=whsec_...

# JWT Secret for authentication
JWT_SECRET=your-super-secret-jwt-key-min-32-chars

# ============================================
# DEPLOYMENT CONFIGURATION
# ============================================
# Railway
RAILWAY_PROJECT_ID=...
RAILWAY_API_TOKEN=...
RAILWAY_ENVIRONMENT=production

# Vercel (for UI deployment)
VERCEL_TOKEN=...
VERCEL_ORG_ID=...
VERCEL_PROJECT_ID=...

# Docker Registry
DOCKER_REGISTRY=docker.io
DOCKER_USERNAME=...
DOCKER_PASSWORD=...

# ============================================
# MONITORING & LOGGING
# ============================================
# Datadog
# DATADOG_API_KEY=...
# DATADOG_APP_KEY=...

# Sentry
# SENTRY_DSN=https://[key]@[org].ingest.sentry.io/[project]
# SENTRY_AUTH_TOKEN=...

# LogDNA / Mezmo
# LOGDNA_INGESTION_KEY=...

# New Relic
# NEW_RELIC_LICENSE_KEY=...
# NEW_RELIC_APP_NAME=multiboard-sync-service

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_SCHEDULED_SYNC=false
ENABLE_AUTO_BACKUP=true
ENABLE_COMPRESSION=true
ENABLE_STREAMING=true
ENABLE_DRY_RUN=true

# ============================================
# RESOURCE LIMITS
# ============================================
MAX_DUMP_SIZE_GB=10
MAX_CONCURRENT_JOBS=5
MAX_CHUNK_SIZE_MB=100
JOB_TIMEOUT_MINUTES=60
STATEMENT_TIMEOUT_SECONDS=300

# ============================================
# BACKUP CONFIGURATION
# ============================================
BACKUP_RETENTION_DAYS=30
BACKUP_BEFORE_IMPORT=true
AUTO_CLEANUP_OLD_DUMPS=true

# ============================================
# NOTIFICATION CONFIGURATION (Optional)
# ============================================
# Email (SendGrid, Resend, etc.)
# EMAIL_API_KEY=...
# EMAIL_FROM=noreply@multiboard.com
# EMAIL_ADMIN=admin@multiboard.com

# Slack
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...
# SLACK_CHANNEL=#database-sync

# Discord
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/...

# ============================================
# DEVELOPMENT OVERRIDES
# ============================================
# Set these for local development
NODE_ENV=development
LOG_LEVEL=debug
DISABLE_AUTH=false
USE_LOCAL_STORAGE=false

# ============================================
# SECURITY CONFIGURATION
# ============================================
# Encryption keys (for encrypting credentials at rest)
ENCRYPTION_KEY=32-char-hex-string-for-aes-256
ENCRYPTION_IV=16-char-hex-string

# IP Whitelist (comma-separated)
# ALLOWED_IPS=192.168.1.1,10.0.0.0/8

# CORS Configuration
CORS_ORIGIN=https://parts-cms.koilab.com,https://multiboard.com

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ============================================
# POSTGRES CONFIGURATION DETAILS
# ============================================
# Parse from DATABASE_URL if needed
POSTGRES_HOST=
POSTGRES_PORT=5432
POSTGRES_USER=
POSTGRES_PASSWORD=
POSTGRES_DATABASE=
POSTGRES_SCHEMA=multiboard
POSTGRES_SSL_MODE=require

# Connection Pool Settings
POSTGRES_MAX_CONNECTIONS=20
POSTGRES_IDLE_TIMEOUT_MS=30000
POSTGRES_CONNECTION_TIMEOUT_MS=10000

# ============================================
# NOTES FOR DEVELOPER
# ============================================
# 1. Production credentials are in 1Password: [vault-name]
# 2. Staging credentials are in: [location]
# 3. For local development, use Docker Compose to spin up services
# 4. Never use production credentials in development
# 5. Rotate all keys every 90 days
# 6. Monitor AWS costs weekly
# 7. Set up alerts for failed sync jobs
# ============================================